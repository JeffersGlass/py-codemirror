const e="2b7f37dd-0f3c-4afb-a444-c83aed8deab7",t="function";var a=e=>({value:new Promise((t=>{let a=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");a.onmessage=t,a.postMessage(e)}))})
/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:s,Map:n,SharedArrayBuffer:r,Uint16Array:o}=globalThis,{BYTES_PER_ELEMENT:i}=s,{BYTES_PER_ELEMENT:l}=o,{isArray:c}=Array,{notify:f,wait:d,waitAsync:w}=Atomics,p=new WeakSet,g=new WeakMap,u={value:{then:e=>e()}};let h=0;const y=(y,{parse:E=JSON.parse,stringify:m=JSON.stringify,transform:b,interrupt:A}=JSON)=>{if(!g.has(y)){const T=(t,...a)=>y.postMessage({[e]:a},{transfer:t}),v=typeof A===t?A:A?.handler,M=A?.delay||42,S=new TextDecoder("utf-16"),P=(e,t)=>e?(w||a)(t,0):(v?((e,t,a)=>{for(;"timed-out"===d(e,0,0,t);)a()})(t,M,v):d(t,0),u);let N=!1;g.set(y,new Proxy(new n,{has:(e,t)=>"string"==typeof t&&!t.startsWith("_"),get:(e,t)=>"then"===t?null:(...e)=>{const a=h++;let n=new s(new r(2*i)),c=[];p.has(e.at(-1)||c)&&p.delete(c=e.pop()),T(c,a,n,t,b?e.map(b):e);const f=y!==globalThis;let d=0;return N&&f&&(d=setTimeout(console.warn,1e3,`ðŸ’€ðŸ”’ - Possible deadlock if proxy.${t}(...args) is awaited`)),P(f,n).value.then((()=>{clearTimeout(d);const e=n[1];if(!e)return;const t=l*e;return n=new s(new r(t+t%i)),T([],a,n),P(f,n).value.then((()=>E(S.decode(new o(n.buffer).slice(0,e)))))}))},set(a,s,r){const i=typeof r;if(i!==t)throw new Error(`Unable to assign ${s} as ${i}`);if(!a.size){const t=new n;y.addEventListener("message",(async s=>{const n=s.data?.[e];if(c(n)){s.stopImmediatePropagation();const[e,r,...i]=n;let l;if(i.length){const[s,n]=i;if(a.has(s)){N=!0;try{const o=await a.get(s)(...n);if(void 0!==o){const a=m(b?b(o):o);t.set(e,a),r[1]=a.length}}catch(e){l=e}finally{N=!1}}else l=new Error(`Unsupported action: ${s}`);r[0]=1}else{const a=t.get(e);t.delete(e);for(let e=new o(r.buffer),t=0;t<a.length;t++)e[t]=a.charCodeAt(t)}if(f(r,0),l)throw l}}))}return!!a.set(s,r)}}))}return g.get(y)};y.transfer=(...e)=>(p.add(e),e);export{y as default};
