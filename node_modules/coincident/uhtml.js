const e="2b7f37dd-0f3c-4afb-a444-c83aed8deab7",t="M"+e,n="T"+e,r="object",s="function",o="number",a="string",l="undefined",i="symbol";var c=e=>({value:new Promise((t=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=t,n.postMessage(e)}))})
/*! (c) Andrea Giammarchi - ISC */;const{Int32Array:u,Map:f,SharedArrayBuffer:p,Uint16Array:d}=globalThis,{BYTES_PER_ELEMENT:h}=u,{BYTES_PER_ELEMENT:g}=d,{isArray:y}=Array,{notify:w,wait:m,waitAsync:b}=Atomics,v=new WeakSet,E=new WeakMap,x={value:{then:e=>e()}};let k=0;const A=(t,{parse:n=JSON.parse,stringify:r=JSON.stringify,transform:o,interrupt:a}=JSON)=>{if(!E.has(t)){const l=(n,...r)=>t.postMessage({[e]:r},{transfer:n}),i=typeof a===s?a:a?.handler,A=a?.delay||42,T=new TextDecoder("utf-16"),N=(e,t)=>e?(b||c)(t,0):(i?((e,t,n)=>{for(;"timed-out"===m(e,0,0,t);)n()})(t,A,i):m(t,0),x);let M=!1;E.set(t,new Proxy(new f,{has:(e,t)=>"string"==typeof t&&!t.startsWith("_"),get:(e,r)=>"then"===r?null:(...e)=>{const s=k++;let a=new u(new p(2*h)),i=[];v.has(e.at(-1)||i)&&v.delete(i=e.pop()),l(i,s,a,r,o?e.map(o):e);const c=t!==globalThis;let f=0;return M&&c&&(f=setTimeout(console.warn,1e3,`ðŸ’€ðŸ”’ - Possible deadlock if proxy.${r}(...args) is awaited`)),N(c,a).value.then((()=>{clearTimeout(f);const e=a[1];if(!e)return;const t=g*e;return a=new u(new p(t+t%h)),l([],s,a),N(c,a).value.then((()=>n(T.decode(new d(a.buffer).slice(0,e)))))}))},set(n,a,l){const i=typeof l;if(i!==s)throw new Error(`Unable to assign ${a} as ${i}`);if(!n.size){const s=new f;t.addEventListener("message",(async t=>{const a=t.data?.[e];if(y(a)){t.stopImmediatePropagation();const[e,l,...i]=a;let c;if(i.length){const[t,a]=i;if(n.has(t)){M=!0;try{const i=await n.get(t)(...a);if(void 0!==i){const t=r(o?o(i):i);s.set(e,t),l[1]=t.length}}catch(e){c=e}finally{M=!1}}else c=new Error(`Unsupported action: ${t}`);l[0]=1}else{const t=s.get(e);s.delete(e);for(let e=new d(l.buffer),n=0;n<t.length;n++)e[n]=t.charCodeAt(n)}if(w(l,0),c)throw c}}))}return!!n.set(a,l)}}))}return E.get(t)};A.transfer=(...e)=>(v.add(e),e);const T=new FinalizationRegistry((([e,t,n])=>{n&&console.debug(`Held value ${String(t)} not relevant anymore`),e(t)})),N=Object.create(null),M=(e,t,{debug:n,return:r,token:s=e}=N)=>{const o=r||new Proxy(e,N),a=[o,[t,e,!!n]];return!1!==s&&a.push(s),T.register(...a),o},{defineProperty:$,getOwnPropertyDescriptor:C,getPrototypeOf:S,isExtensible:O,ownKeys:P,preventExtensions:L,set:W,setPrototypeOf:D}=Reflect,{assign:j,create:B}=Object,R=S(Int8Array),_="isArray",z=(e,t)=>{const{get:n,set:r,value:s}=e;return n&&(e.get=t(n)),r&&(e.set=t(r)),s&&(e.value=t(s)),e},H=(e,t)=>[e,t],U=e=>t=>{const n=typeof t;switch(n){case r:if(null==t)return H("null",t);if(t===globalThis)return H(r,null);case s:return e(n,t);case"boolean":case o:case a:case l:case"bigint":return H(n,t);case i:if(I.has(t))return H(n,I.get(t))}throw new Error(`Unable to handle this ${n} type`)},I=new Map(P(Symbol).filter((e=>typeof Symbol[e]===i)).map((e=>[Symbol[e],e]))),J=e=>{for(const[t,n]of I)if(n===e)return t},F=e=>e;function K(){return this}const Y="apply",q="construct",G="defineProperty",Q="deleteProperty",V="get",X="getOwnPropertyDescriptor",Z="getPrototypeOf",ee="has",te="isExtensible",ne="ownKeys",re="preventExtensions",se="set",oe="setPrototypeOf",ae="delete";var le=((e,t)=>{const n=t&&new WeakMap;if(t){const{addEventListener:e}=EventTarget.prototype;$(EventTarget.prototype,"addEventListener",{value(t,r,...s){return s.at(0)?.invoke&&(n.has(this)||n.set(this,new Map),n.get(this).set(t,[].concat(s[0].invoke)),delete s[0].invoke),e.call(this,t,r,...s)}})}const c=t&&(e=>{const{currentTarget:t,target:r,type:s}=e;for(const o of n.get(t||r)?.get(s)||[])e[o]()});return function(n,u,f,...p){let d=0,h=this?.transform||F;const g=new Map,y=new Map,{[f]:w}=n,m=p.length?j(B(globalThis),...p):globalThis,b=U(((e,t)=>{if(!g.has(t)){let n;for(;y.has(n=d++););g.set(t,n),y.set(n,e===r?h(t):t)}return H(e,g.get(t))})),v=e=>{w(ae,H(a,e))},E=([e,n])=>{switch(e){case r:if(null==n)return m;if(typeof n===o)return y.get(n);if(!(n instanceof R))for(const e in n)n[e]=E(n[e]);return n;case s:if(typeof n===a){if(!y.has(n)){const e=function(...e){return t&&e.at(0)instanceof Event&&c(...e),w(Y,H(s,n),b(this),e.map(b))};return y.set(n,new WeakRef(e)),M(n,v,{return:e,token:!1})}return y.get(n).deref()}return y.get(n);case i:return J(n)}return n},x={[Y]:(e,t,n)=>b(e.apply(t,n)),[q]:(e,t)=>b(new e(...t)),[G]:(e,t,n)=>b($(e,t,n)),[Q]:(e,t)=>b(delete e[t]),[Z]:e=>b(S(e)),[V]:(e,t)=>b(e[t]),[X]:(e,t)=>{const n=C(e,t);return n?H(r,z(n,b)):H(l,n)},[ee]:(e,t)=>b(t in e),[te]:e=>b(O(e)),[ne]:e=>H(r,P(e).map(b)),[re]:e=>b(L(e)),[se]:(e,t,n)=>b(W(e,t,n)),[oe]:(e,t)=>b(D(e,t)),[ae](e){g.delete(y.get(e)),y.delete(e)}};return n[u]=(e,t,...n)=>{switch(e){case Y:n[0]=E(n[0]),n[1]=n[1].map(E);break;case q:n[0]=n[0].map(E);break;case G:{const[e,t]=n;n[0]=E(e);const{get:r,set:s,value:o}=t;r&&(t.get=E(r)),s&&(t.set=E(s)),o&&(t.value=E(o));break}default:n=n.map(E)}return x[e](E(t),...n)},{proxy:n,[e.toLowerCase()]:m,[`is${e}Proxy`]:()=>!1}}})("Window",!0),ie=(e=>{let t=0;const n=new Map,l=new Map,c=Symbol(),u=e=>typeof e===s?e():e,f=e=>typeof e===r&&!!e&&c in e,p=Array[_];return function(d,h,g){const y=this?.transform||F,{[h]:w}=d,m=new Map,b=e=>{m.delete(e),w(ae,v(e))},v=U(((e,o)=>{if(c in o)return u(o[c]);if(e===s){if(o=y(o),!l.has(o)){let e;for(;l.has(e=String(t++)););n.set(o,e),l.set(e,o)}return H(e,n.get(o))}if(!(o instanceof R)){e===r&&(o=y(o));for(const e in o)o[e]=v(o[e])}return H(e,o)})),E=e=>{const[t,n]=e;if(!m.has(n)){const r=t===s?K.bind(e):e,o=new Proxy(r,A);return m.set(n,new WeakRef(o)),M(n,b,{return:o,token:!1})}return m.get(n).deref()},x=e=>{const[t,n]=e;switch(t){case r:return null===n?globalThis:typeof n===o?E(e):n;case s:return typeof n===a?l.get(n):E(e);case i:return J(n)}return n},k=(e,t,...n)=>x(w(e,u(t),...n)),A={[Y]:(e,t,n)=>k(Y,e,v(t),n.map(v)),[q]:(e,t)=>k(q,e,t.map(v)),[G]:(e,t,n)=>{const{get:r,set:o,value:a}=n;return typeof r===s&&(n.get=v(r)),typeof o===s&&(n.set=v(o)),typeof a===s&&(n.value=v(a)),k(G,e,v(t),n)},[Q]:(e,t)=>k(Q,e,v(t)),[Z]:e=>k(Z,e),[V]:(e,t)=>t===c?e:k(V,e,v(t)),[X]:(e,t)=>{const n=k(X,e,v(t));return n&&z(n,x)},[ee]:(e,t)=>t===c||k(ee,e,v(t)),[te]:e=>k(te,e),[ne]:e=>k(ne,e).map(x),[re]:e=>k(re,e),[se]:(e,t,n)=>k(se,e,v(t),v(n)),[oe]:(e,t)=>k(oe,e,v(t))};d[g]=(e,t,r,s)=>{switch(e){case Y:return x(t).apply(x(r),s.map(x));case ae:{const e=x(t);n.delete(l.get(e)),l.delete(e)}}};const T=new Proxy([r,null],A),N=T.Array[_];return $(Array,_,{value:e=>f(e)?N(e):p(e)}),{[e.toLowerCase()]:T,[`is${e}Proxy`]:f,proxy:d}}})("Window"),ce=typeof Worker===s?Worker:class{};const ue=new WeakMap,fe=(e,...r)=>{const s=A(e,...r);if(!ue.has(s)){const o=e instanceof ce?le:ie;ue.set(s,o.call(r.at(0),s,t,n))}return ue.get(s)};fe.transfer=A.transfer;class pe extends WeakMap{set(e,t){return super.set(e,t),t}}
/*! (c) Andrea Giammarchi - ISC */const de=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i,he=/<([a-z]+[a-z0-9:._-]*)([^>]*?)(\/?)>/g,ge=/([^\s\\>"'=]+)\s*=\s*(['"]?)\x01/g,ye=/[\x01\x02]/g;var we=({document:e})=>{const{isArray:t,prototype:n}=Array,{indexOf:r}=n,{createDocumentFragment:s,createElement:o,createElementNS:a,createTextNode:l,createTreeWalker:i,importNode:c}=new Proxy({},{get:(t,n)=>e[n].bind(e)});let u;const f=(e,t)=>t?(e=>{u||(u=a("http://www.w3.org/2000/svg","svg")),u.innerHTML=e;const t=s();return t.append(...u.childNodes),t})(e):(e=>{const t=o("template");return t.innerHTML=e,t.content})(e),p=(t,n)=>111===t.nodeType?1/n<0?n?(({firstChild:t,lastChild:n})=>{const r=e.createRange();return r.setStartAfter(t),r.setEndAfter(n),r.deleteContents(),t})(t):t.lastChild:n?t.valueOf():t.firstChild:t,d=e=>null==e?e:e.valueOf(),h=(e,n)=>{let r,s,o=n.slice(2);return!(n in e)&&(s=n.toLowerCase())in e&&(o=s.slice(2)),n=>{const s=t(n)?n:[n,!1];r!==s[0]&&(r&&e.removeEventListener(o,r,s[1]),(r=s[0])&&e.addEventListener(o,r,s[1]))}},g=({childNodes:e},t)=>e[t],y=(e,t,n)=>((e,t,n,r,s)=>{const o=n.length;let a=t.length,l=o,i=0,c=0,u=null;for(;i<a||c<l;)if(a===i){const t=l<o?c?r(n[c-1],-0).nextSibling:r(n[l-c],0):s;for(;c<l;)e.insertBefore(r(n[c++],1),t)}else if(l===c)for(;i<a;)u&&u.has(t[i])||e.removeChild(r(t[i],-1)),i++;else if(t[i]===n[c])i++,c++;else if(t[a-1]===n[l-1])a--,l--;else if(t[i]===n[l-1]&&n[c]===t[a-1]){const s=r(t[--a],-1).nextSibling;e.insertBefore(r(n[c++],1),r(t[i++],-1).nextSibling),e.insertBefore(r(n[--l],1),s),t[a]=n[l]}else{if(!u){u=new Map;let e=c;for(;e<l;)u.set(n[e],e++)}if(u.has(t[i])){const s=u.get(t[i]);if(c<s&&s<l){let o=i,f=1;for(;++o<a&&o<l&&u.get(t[o])===s+f;)f++;if(f>s-c){const o=r(t[i],0);for(;c<s;)e.insertBefore(r(n[c++],1),o)}else e.replaceChild(r(n[c++],1),r(t[i++],-1))}else i++}else e.removeChild(r(t[i++],-1))}return n})(e.parentNode,t,n,p,e),w=(t,n)=>{switch(n[0]){case"?":return((e,t,n)=>r=>{const s=!!d(r);n!==s&&((n=s)?e.setAttribute(t,""):e.removeAttribute(t))})(t,n.slice(1),!1);case".":return((e,t)=>"dataset"===t?(({dataset:e})=>t=>{for(const n in t){const r=t[n];null==r?delete e[n]:e[n]=r}})(e):n=>{e[t]=n})(t,n.slice(1));case"@":return h(t,"on"+n.slice(1));case"o":if("n"===n[1])return h(t,n)}switch(n){case"ref":return(e=>{let t;return n=>{t!==n&&(t=n,"function"==typeof n?n(e):n.current=e)}})(t);case"aria":return(e=>t=>{for(const n in t){const r="role"===n?n:`aria-${n}`,s=t[n];null==s?e.removeAttribute(r):e.setAttribute(r,s)}})(t)}return((t,n)=>{let r,s=!0;const o=e.createAttributeNS(null,n);return e=>{const n=d(e);r!==n&&(null==(r=n)?s||(t.removeAttributeNode(o),s=!0):(o.value=n,s&&(t.setAttributeNodeNS(o),s=!1)))}})(t,n)};function m(e){const{type:n,path:r}=e,s=r.reduceRight(g,this);return"node"===n?(e=>{let n,r,s=[];const o=a=>{switch(typeof a){case"string":case"number":case"boolean":n!==a&&(n=a,r||(r=l("")),r.data=a,s=y(e,s,[r]));break;case"object":case"undefined":if(null==a){n!=a&&(n=a,s=y(e,s,[]));break}if(t(a)){n=a,0===a.length?s=y(e,s,[]):"object"==typeof a[0]?s=y(e,s,a):o(String(a));break}if(n!==a)if("ELEMENT_NODE"in a)n=a,s=y(e,s,11===a.nodeType?[...a.childNodes]:[a]);else{const e=a.valueOf();e!==a&&o(e)}break;case"function":o(a(e))}};return o})(s):"attr"===n?w(s,e.name):(e=>{let t;return n=>{const r=d(n);t!=r&&(t=r,e.textContent=null==r?"":r)}})(s)}const b=e=>{const t=[];let{parentNode:n}=e;for(;n;)t.push(r.call(n.childNodes,e)),e=n,({parentNode:n}=e);return t},v="isÂµ",E=new pe,x=/^(?:textarea|script|style|title|plaintext|xmp)$/,k=(e,t)=>{const n="svg"===e,r=((e,t,n)=>{let r=0;return e.join("").trim().replace(he,((e,t,r,s)=>{let o=t+r.replace(ge,"=$2$1").trimEnd();return s.length&&(o+=n||de.test(t)?" /":"></"+t),"<"+o+">"})).replace(ye,(e=>""===e?"\x3c!--"+t+r+++"--\x3e":t+r++))})(t,v,n),s=f(r,n),o=i(s,129),a=[],l=t.length-1;let c=0,u=`${v}${c}`;for(;c<l;){const e=o.nextNode();if(!e)throw`bad template: ${r}`;if(8===e.nodeType)e.data===u&&(a.push({type:"node",path:b(e)}),u=`${v}${++c}`);else{for(;e.hasAttribute(u);)a.push({type:"attr",path:b(e),name:e.getAttribute(u)}),e.removeAttribute(u),u=`${v}${++c}`;x.test(e.localName)&&e.textContent.trim()===`\x3c!--${u}--\x3e`&&(e.textContent="",a.push({type:"text",path:b(e)}),u=`${v}${++c}`)}}return{content:s,nodes:a}},A=(e,t)=>{const{content:n,nodes:r}=E.get(t)||E.set(t,k(e,t)),s=c(n,!0);return{content:s,updates:r.map(m,s)}},T=(e,{type:t,template:n,values:r})=>{const s=N(e,r);let{entry:o}=e;o&&o.template===n&&o.type===t||(e.entry=o=((e,t)=>{const{content:n,updates:r}=A(e,t);return{type:e,template:t,content:n,updates:r,wire:null}})(t,n));const{content:a,updates:l,wire:i}=o;for(let e=0;e<s;e++)l[e](r[e]);return i||(o.wire=(e=>{const{firstChild:t,lastChild:n}=e;if(t===n)return n||e;const{childNodes:r}=e,s=[...r];return{ELEMENT_NODE:1,nodeType:111,firstChild:t,lastChild:n,valueOf:()=>(r.length!==s.length&&e.append(...s),e)}})(a))},N=({stack:e},n)=>{const{length:r}=n;for(let s=0;s<r;s++){const r=n[s];r instanceof M?n[s]=T(e[s]||(e[s]={stack:[],entry:null,wire:null}),r):t(r)?N(e[s]||(e[s]={stack:[],entry:null,wire:null}),r):e[s]=null}return r<e.length&&e.splice(r),r};class M{constructor(e,t,n){this.type=e,this.template=t,this.values=n}}const $=e=>{const t=new pe;return Object.assign(((t,...n)=>new M(e,t,n)),{for(n,r){const s=t.get(n)||t.set(n,new MapSet);return s.get(r)||s.set(r,(t=>(n,...r)=>T(t,{type:e,template:n,values:r}))({stack:[],entry:null,wire:null}))},node:(t,...n)=>T({stack:[],entry:null,wire:null},new M(e,t,n)).valueOf()})},C=new pe,S=$("html"),O=$("svg");return{Hole:M,render:(e,t)=>{const n="function"==typeof t?t():t,r=C.get(e)||C.set(e,{stack:[],entry:null,wire:null}),s=n instanceof M?T(r,n):n;return s!==r.wire&&(r.wire=s,e.replaceChildren(s.valueOf())),e},html:S,svg:O}};const me=(e,...t)=>{const n=fe(e,...t);return n.uhtml||(n.uhtml=we(n.window)),n};me.transfer=fe.transfer;export{me as default};
